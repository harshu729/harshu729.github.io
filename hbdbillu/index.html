<!DOCTYPE html>
<html>
  <head>
    <title>Happy Birthday Vidisha!</title>
    <meta name="description" content="Happy Birthday Vidisha!">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/small.css" media="(max-width: 630px)">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,700|Lobster' rel='stylesheet' type='text/css'>
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>

  <body>
    <canvas id="canvas"></canvas>
    <div class="container">
      
      <section class="hero">
        <img src="images/banner-hero.jpg" alt="Vidisha is a meme">
      </section>



      <section class="intro">

        <h1>Happy Birthday bb beby baby billu</h1>
        
        <aside class="left">
          <img src="images/bubble-vidisha-left.jpg" alt="Vidisha">
        </aside>

        <aside class="right">
          <img src="images/bubble-vidisha-right.jpg" alt="Vidisha">
        </aside>

        <p>Vidisha's birthday is coming up! We hope you intend to come to our magical party for a most lovely friend. There will be 99 bottles of wine, a dozen in attendance, and if we're lucky, Dr. Bubbles (in special appearance)!</p>

        <p>You know when to go out, you know when to stay in. Come to Anand's this Thursday, and party like it's Mumbai!</p>

      </section>

      <section class="contact">
        <aside class="left">
          <img src="images/unicorn.png" alt="Unicorn">
        </aside>
        <h2>Thursday, December 31st!</h2>
        <p>Starts promptly at <time>20:00</time></p>
        <p><address>Anand VadaPav!<br>Vile Parle East<br> Mumbai, IN 40057</address></p>
        <p>Coming? Email <a href="mailto:vidisha@hbdbillu.monster?Subject=Vidisha is billu">yes@happybirthdaydude.lol</a> </p>

        </section>

        <!-- MAP -->
        <section class="clearfix map">
          <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3770.1048242874385!2d72.83454831490155!3d19.10305678707239!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3be7c9b88ab6b4a7%3A0x492e7caca9aff06b!2sAnand%20Dosa%20and%20Vada%20Pav%20Stall!5e0!3m2!1sen!2sin!4v1597756485217!5m2!1sen!2sin"   frameborder="0" style="border:0;" allowfullscreen="" aria-hidden="false" tabindex="0"></iframe>
        </section>
        <!-- /MAP -->
    </div>
  </body>
    <script type="text/javascript">
    window.requestAnimFrame = (function(){
    return  window.requestAnimationFrame       || 
      window.webkitRequestAnimationFrame || 
      window.mozRequestAnimationFrame    || 
      window.oRequestAnimationFrame      || 
      window.msRequestAnimationFrame     || 
      function( callback ){
        window.setTimeout(callback, 1000 / 60);
      };
  })();

  var canvas = document.getElementById("canvas"),
      ctx = canvas.getContext("2d"),
      keyword = "HAPPY BIRTHDAY VIDISHA",
      imageData,
      density =2,
      mouse = {},
      hovered = false,
      colors = ["255, 255, 255", "255, 255, 255", "255, 255,  255", "255, 255, 255", "255, 255, 255"],
      minDist = 30,
      bounceFactor = 5;

  var W = window.innerWidth,
      H = window.innerHeight;

  canvas.width = W;
  canvas.height = H;

  document.addEventListener("mousemove", function(e) {
    mouse.x = e.pageX;
    mouse.y = e.pageY;
  }, false);

  // Particle Object
  var Particle = function() {
    this.w = Math.random() * 10.5;
    this.h = Math.random() * 10.5;
    this.x = -W;
    this.y = -H;
    this.free = false;
    
    this.vy = -5 + parseInt(Math.random() * 10) / 2;
    this.vx = -4 + parseInt(Math.random() * 8);
    
    // Color
    this.a = Math.random();
    this.color = colors[parseInt(Math.random()*colors.length)];
    
    this.setPosition = function(x, y) {
      this.x = x;
      this.y = y;
    };
    
    this.draw = function() {
      ctx.fillStyle = "rgba("+this.color+","+this.a+")";
      ctx.fillRect(this.x, this.y,  this.w,  this.h);
    }
  };

  var particles = [];

  // Draw the text
  function drawText() {
    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = "#8800ff";
    ctx.font = "100px 'Arial', sans-serif";
    ctx.textAlign = "center";
    ctx.fillText(keyword, W/2, H/2);
  }

  // Clear the canvas
  function clear() {
    ctx.clearRect(0, 0, W, H);
  }

  // Get pixel positions
  function positionParticles() {
    // Get the data
    imageData = ctx.getImageData(0, 0, W, W);
    data = imageData.data;
    
    // Iterate each row and column
    for (var i = 0; i < imageData.height; i += density) {
      for (var j = 0; j < imageData.width; j += density) {
        
        // Get the color of the pixel
        var color = data[((j * ( imageData.width * 4)) + (i * 4)) - 1];
        
        // If the color is black, draw pixels
        if (color == 255) {
          particles.push(new Particle());
          particles[particles.length - 1].setPosition(i, j);
        }
      }
    }
  }

  drawText();
  positionParticles();


  // Update
  function update() {
    clear();
    
    for(i = 0; i < particles.length; i++) {
      var p = particles[i];
      
      if(mouse.x > p.x && mouse.x < p.x + p.w && mouse.y > p.y && mouse.y < p.y + p.h) 
        hovered = true;
      
      if(hovered == true) {
        
        var dist = Math.sqrt((p.x - mouse.x)*(p.x - mouse.x) + (p.y - mouse.y)*(p.y - mouse.y));
        
        if(dist <= minDist)
          p.free = true;
        
        if(p.free == true) {
          p.y += p.vy;
          p.vy += 0.15;
          p.x += p.vx;
          
          // Collision Detection
          if(p.y + p.h > H) {
            p.y = H - p.h;
            p.vy *= -bounceFactor;
            
            // Friction applied when on the floor
            if(p.vx > 0)
              p.vx -= 0.1;
            else 
              p.vx += 0.1;
          }
          
          if(p.x + p.w > W) {
            p.x = W - p.w;
            p.vx *= -bounceFactor;
          }
          
          if(p.x < 0) {
            p.x = 0;
            p.vx *= -0.5;
          }
        }
      }
      
      ctx.globalCompositeOperation = "lighter";
      p.draw();
    }
  }


  (function animloop(){
    requestAnimFrame(animloop);
    update();
  })();
  </script>
</html>
